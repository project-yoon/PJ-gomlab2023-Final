<!DOCTYPE html>
<html lang="ko">
<include src="../include/head.html" title="편집 강의 : 플레이어" menucss="/dev/ui/css/lecture.css"></include>
<body class="course">
<!-- 헤더 -->
<include src="../include/header.html"></include>
<!-- //헤더 -->

<!-- 컨텐츠 -->
<main id="container">

	<div id="contents">
		<section class="panel-wrap">

			<div class="panel wide panel-course-bg-4 course-pd-4">
				<div class="inner w1280">
					<div class="course-player-wrap">
						<div class="course-player--wrap">
							<div class="course-player-head">
								<!-- [D] 231208_수정 : h1 태그로 교체 -->
								<h1 class="course-player-head-title">
									<a href="#!">곰믹스맥스 기본기 다지기</a>
								</h1>
								<!-- // [D] 231208_수정 : h1 태그로 교체 -->
								<a href="#!" class="btn-md btn-ghost-w" download>준비물 다운로드</a>
							</div>
							<!-- 플레이어 -->
							<div class="course-player">
								<video id="courseVideo" class="course-video video-js" controls="controls"></video>
								<!-- [D] 231208_수정 : title 속성 추가 -->
								<button type="button" class="btn-player-prev" title="이전 강의"></button>
								<button type="button" class="btn-player-next" title="다음 강의"></button>
								<!-- // [D] 231208_수정 : title 속성 추가 -->
							</div>
							<!-- // 플레이어 -->
						</div>
						<div class="course-list-wrap">
							<div class="course-list-head">
								<!-- [D] 231208_수정 : h2 태그로 교체 -->
								<h2>강의 목차</h2>
								<!-- // [D] 231208_수정 : h2 태그로 교체 -->
							</div>
							<div class="course-list-content">
								<div class="course-list-title">
									<!-- [D] 231208_수정 : h3 태그로 교체 -->
									<h3>
										<span class="part-tag">Part 1</span>
										<span>곰믹스맥스 기본기 다지기</span>
									</h3>
									<!-- // [D] 231208_수정 : h3 태그로 교체 -->
								</div>
								<ul>
									<li>
										<a href="#!" class="active">
											<span>1</span>
											<span class="course-list-sub-title">소개</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>2</span>
											<span class="course-list-sub-title">프로그램 다운로드 및 실행</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>3</span>
											<span class="course-list-sub-title">프로젝트 생성하기</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>4</span>
											<span class="course-list-sub-title">화면구성</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>5</span>
											<span class="course-list-sub-title">편집</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>6</span>
											<span class="course-list-sub-title">인코딩</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>7</span>
											<span class="course-list-sub-title">기타 편집할 때 편리한 기능</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>8</span>
											<span class="course-list-sub-title">엔딩</span>
										</a>
									</li>
								</ul>

								<div class="course-list-title">
									<!-- [D] 231208_수정 : h3 태그로 교체 -->
									<h3>
										<span class="part-tag">Part 2</span>
										<span>1분 자기소개 영상 제작하기</span>
									</h3>
									<!-- // [D] 231208_수정 : h3 태그로 교체 -->
								</div>
								<ul>
									<li>
										<a href="#!">
											<span>1</span>
											<span class="course-list-sub-title">소개</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>2</span>
											<span class="course-list-sub-title">영상 내용 구성하기</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>3</span>
											<span class="course-list-sub-title">영상 화면 구성하기</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>4</span>
											<span class="course-list-sub-title">촬영하기</span>
										</a>
									</li>
								</ul>

								<div class="course-list-title">
									<!-- [D] 231208_수정 : h3 태그로 교체 -->
									<h3>
										<span class="part-tag">Part 3</span>
										<span>3강 오프닝</span>
									</h3>
									<!-- // [D] 231208_수정 : h3 태그로 교체 -->
								</div>
								<ul>
									<li>
										<a href="#!">
											<span>1</span>
											<span class="course-list-sub-title">소개</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>2</span>
											<span class="course-list-sub-title">영상 내용 구성하기</span>
											<span class="complete">완료</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>3</span>
											<span class="course-list-sub-title">영상 화면 구성하기</span>
										</a>
									</li>
									<li>
										<a href="#!">
											<span>4</span>
											<span class="course-list-sub-title">촬영하기</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

		</section>
	</div>

</main>
<!-- //컨텐츠 -->

<!-- 각 화면 별 단독 js 영역 -->
<script src="/dev/ui/js/libs/video.js"></script>
<script src="/dev/ui/js/libs/videojs-playlist.js"></script>
<script src="/dev/ui/js/libs/videojs.hotkeys.js"></script>
<script>
	/* 플레이어 옵션 */
	let videoOpt = {
		playbackRates: [2.0, 1.7, 1.5, 1.2, 1.0, 0.8], // 재생 속도 , 231220_수정
		controls: true,
		preload: "auto",
		autoplay: false,
		volume: true,
		playsinline: true,
		controlBar: {
			playToggle: true,
			pictureInPictureToggle: false,
			remainingTimeDisplay: true,
			progressControl: true,
			qualitySelector: false,
			Duration: true,
		},
		"userActions": {
			"doubleClick": false,
		},
		plugins: {
			hotkeys: {
				seekStep: 10,
				enableFullscreen: false,
				volumeStep: false
			},
		},
		language: "ko",
		languages: {
			ko: {
				"Play Video": "재생",
				"Play": "재생",
				"Pause": "일시정지",
				"Replay": "다시보기",
				"Current Time": "재생 시간",
				"Duration": "전체 시간",
				"Remaining Time": "남은 시간",
				"Fullscreen": "전체화면보기",
				"Exit Fullscreen": "전체화면보기 닫기",
				"Mute": "음소거",
				"Unmute": "음소거 해제",
				"Volume Level": "볼륨 조정",
				"Playback Rate": "재생 속도",
				"selected": "선택됨",
				"Now Playing": "재생중인 강의"
			}
		}
	}

	let player = videojs('courseVideo', videoOpt); // 플레이어 호출
	let buttons = videojs.getComponent('Button');

	player.on('pause', function() {});

	/* 플레이 리스트 */
	player.playlist([
		{
			name: '곰믹스맥스 기본기 다지기',
			sources: [{
				src: 'http://media.w3.org/2010/05/sintel/trailer.mp4',
				type: 'video/mp4'
			}],
			poster: 'http://media.w3.org/2010/05/sintel/poster.png',
			duration: 52,
		},
		{
			name: '1분 자기소개 영상 제작하기',
			sources: [{
				src: 'http://media.w3.org/2010/05/sintel/trailer.mp4',
				type: 'video/mp4'
			}],
			poster: 'http://media.w3.org/2010/05/bunny/poster.png',
			duration: 52,
		},
		{
			name: '3강 오프닝',
			sources: [{
				src: 'https://vjs.zencdn.net/v/oceans.mp4',
				type: 'video/mp4'
			}],
			poster: 'https://vjs.zencdn.net/v/oceans.png',
			duration: 46,
		},
	]);
	// console.log(player.playlist());

	let Component = videojs.getComponent('Component');

	/* 이전 강의 버튼 이벤트 */
	$('.btn-player-prev').on('click', function() {
		$('.course-player-head-title a').text(player.playlist.previous().name);

		if (player.playlist.currentItem() === 0) {
			$(this).attr("disabled", true).addClass('off');
		}

		if (player.playlist.lastIndex() != player.playlist.currentItem()) {
			$('.btn-player-next').attr("disabled", false).removeClass('off');
		}
	});

	/* 다음 강의 버튼 이벤트 */
	$('.btn-player-next').on('click', function() {
		$('.course-player-head-title a').text(player.playlist.next().name);

		if (player.playlist.currentItem() === player.playlist.lastIndex()) {
			$(this).attr("disabled", true).addClass('off');
		}

		if (player.playlist.lastIndex() !== player.playlist.currentItem()) {
			$('.btn-player-prev').attr("disabled", false).removeClass('off');
		}
	});

	/* 플레이어 내 큰 재생/일시정지 버튼 이벤트 */
	$('.course-video .vjs-big-play-button').on('touchend', function() {
		if ($('.course-video').hasClass('vjs-playing')) {
			player.pause();
		}
		if ($('.course-video').hasClass('vjs-paused')) {
			player.play();
		}
	});
	player.bigPlayButton.on('click', function() {
		if ($('.course-video').hasClass('vjs-playing')) {
			player.pause();
		}
		if ($('.course-video').hasClass('vjs-paused')) {
			player.play();
		}
	});
	player.on(['waiting', 'pause'], function() {
		player.bigPlayButton.el_.title = '재생',
		player.bigPlayButton.controlTextEl_.innerText = '재생';
	});
	player.on('playing', function() {
		player.bigPlayButton.el_.title = '일시정지',
		player.bigPlayButton.controlTextEl_.innerText = '일시정지';
	});
	player.on('ended', function() {
		// player.playlist.autoadvance(3); // 동영상 재생 완료 후 다음 동영상 자동재생 타이밍
		setTimeout(() => { // autoadvance(3) 동일
			$('.course-player-head-title a').text(player.playlist.next().name);
		}, 3000);
	});

	/* 전체 화면 여부 */
	player.on('fullscreenchange', function() {
		if (player.isFullscreen()) { // 전체 화면일 때
			$('.course-player-head-title, .btn-player-prev, .btn-player-next').addClass('active');
			$('.course-player-head-title').prependTo($('.course-video')); // 목차 제목 불러오기
		} else {
			$('.course-player-head-title, .btn-player-prev, .btn-player-next').removeClass('active');
			$('.course-player-head-title').prependTo($('.course-player-head'));
		}
	});

	/* 볼륨 버튼 제어 */
	$('.vjs-volume-panel').on({
		mouseenter: function() {
			if ($(this).hasClass('vjs-hover') === true) {
				$('.vjs-time-control').css({'left': '320px'});
			}
		},
		mouseleave: function() {
			if ($(this).hasClass('vjs-hover') !== true) {
				$('.vjs-time-control').css({'left': '204px'});
			}
		},
	});

	/* 재생 속도 버튼 이벤트 */ // [D] 231220_수정: 기능 일부 수정
	$('.vjs-playback-rate .vjs-icon-placeholder').on({
		mouseenter: function() {
			if ($('.vjs-menu').css('display') === 'none') {
				// $('.vjs-menu').show().addClass('show-menu');
				$('.vjs-menu-item-text:visible').each(function () {
					let playbackRatesData = $(this).text().replace(/x/g, ''); // 재생 속도 예)1.0x ... 뒤에 x 특수문자 제거 후 반환

					$(this).text(playbackRatesData);

					if ($(this).text() === '1') { // 재생 속도 1 배속 문자열에 텍스트 추가
						$(this).text('1.0 (정상 속도)');
					}
				});
			}
		},
		mouseleave: function() {
			$('.vjs-menu').hasClass('show-menu') ? $('.vjs-menu').removeClass('show-menu') : ''
		},
		click: function() {
			$(this).off('mouseenter');
			if ($('.vjs-menu').hasClass('show-menu')) {
				$('.vjs-menu').hide().removeClass('show-menu')
			} else {
				$('.vjs-menu').show().addClass('show-menu');
			}
			return false;
		}
	});
	$('.vjs-menu-content li').on('click', function() {
		$('.vjs-menu').hide();
	});
	$(document).mouseup(function(e) {
		if ($('.vjs-menu').has(e.target).length === 0) {
			$('.vjs-menu').hide();
		}
	});

	/* 이전, 다음 강의 보기 버튼 video 태그안에 추가 */
	$('.btn-player-prev, .btn-player-next').appendTo($('.vjs-control-bar'));

	/* 강의 목차 버튼 이벤트 */
	let searchRoundBtn = document.querySelectorAll('.course-list-content ul li a');
	for (let i = 0; i < searchRoundBtn.length; i++) {
		searchRoundBtn[i].addEventListener('click', () => {
			for (let j = 0; j < searchRoundBtn.length; j++) {
				searchRoundBtn[j].classList.remove('active');
			}
			searchRoundBtn[i].classList.add('active');
		})
	};
</script>
<!-- //각 화면 별 단독 js 영역 -->

<!-- 퀵 메뉴 -->
<include src="../include/quick_menu.html"></include>
<!-- //퀵 메뉴 -->

<!-- 푸터 -->
<include src="../include/footer.html"></include>
<!-- //푸터 -->
</body>
</html>